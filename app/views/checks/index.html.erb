<p id="notice"><%= notice %></p>

<div class="section has-text-centered">
  <%= link_to 'Create New Check', new_check_path, class: 'button is-primary is-large' %>
</div>

<div class="check-list">
  <% @checks.each do |c| %>
    <% decorate(c) do |check| %>
      <div class="container">
        <div class="card check">
          <nav class="level check-item">
          <div class="level-left">
            <div class="level-item">
              <span class="tag is-<%= check.up? ? 'success' : 'danger' %> is-medium"><%= check.current_status %></span>
            </div>
            <div class="level-item check-item__title">
              <%= link_to check.name, check, class: 'subtitle' %>
            </div>
          </div>

          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Uptime</p>
              <p class="title"><%= check.uptime_1month.round(2) %>%</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Mean</p>
              <p class="title"><%= check.mean_time %></p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Last 24hour(ms)</p>
              <div id="chart<%= check.id.to_s %>" style="width: 300px; height: 100px">
              </div>
            </div>

            <script>
              new Chartist.Line("#chart<%= check.id.to_s %>", <%= check.last_day_chart_data %>, {
                // Don't draw the line chart points
                showPoint: false,
                lineSmooth: true,
                // X-Axis specific configuration
                axisX: {
                  // We can disable the grid for this axis
                  showGrid: false,
                  // and also don't show the label
                  showLabel: false
                },
                // Y-Axis specific configuration
                axisY: {
                  showGrid: false,
                  // Lets offset the chart a bit from the labels
                  offset: 60,
                  // The label interpolation function enables you to modify the values
                  // used for the labels on each axis. Here we are converting the
                  // values into million pound.
                  labelInterpolationFnc: function(value) {
                    return value + 'ms';
                  }
                }
              });
            </script>
          </div>

          <div class="level-right">
            <div class="level-item">
              <div class="block">
                <%= link_to 'Edit', edit_check_path(check), class: 'button is-primary' %>
                <%= link_to 'Destroy', check, method: :delete, data: { confirm: 'Are you sure?' }, class: 'button' %>
              </div>
            </div>
          </div>
          </nav>
        </div>
      </div>
    <% end %>
  <% end %>
</div>

<div class="section has-text-centered">
  <%= link_to 'Create New Check', new_check_path, class: 'button is-primary is-large' %>
</div>
